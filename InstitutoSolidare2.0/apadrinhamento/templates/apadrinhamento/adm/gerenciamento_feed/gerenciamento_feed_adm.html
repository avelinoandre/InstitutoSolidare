{% extends 'shared/base_logout.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/adm.css' %}?v=123">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<div class="page-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <a href="{% url 'admHome' %}">
            <img src="{% static 'img/btn-voltar.svg' %}" alt="Voltar para a Pergunta Anterior" class="back-icon">
        </a>
        <div class="sidebar-label">Data</div>
        <div class="sidebar-label">Posts anteriores</div>
    </div>

    <!-- Main content -->
    <div class="content-area">
        <!-- Filters -->
        <div class="filters">
            <input type="text" id="search-input" placeholder="Nome, tema, tags ...">
        </div>

        <!-- Posts -->
        <div class="posts-grid">
            {% for pub in publicacoes %}
            <div class="post-card" data-title="{{ pub.titulo|lower }}">
                <div class="post-left">
                    {% if pub.foto %}
                    <img src="{{ pub.foto.url }}" alt="Foto da publicação" class="post-image">
                    {% endif %}
                </div>
                <div class="post-right">
                    <h2 class="post-title">{{ pub.titulo }}</h2>
                    <p>{{ pub.conteudo }}</p>
                    <p class="post-date">{{ pub.data_envio }}</p>
                    <button class="manage-post-button">Gerenciar post</button>
                </div>
            </div>
            {% empty %}
            <p>Nenhuma publicação encontrada.</p>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Add Button -->
    <a href="{% url 'novoPost' %}" class="add-button material-symbols-outlined"> add </span>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("search-input");
    if (searchInput) {
        searchInput.addEventListener("input", function () {
            const query = this.value.toLowerCase();
            const posts = document.querySelectorAll(".post-card");

            posts.forEach(post => {
                const title = post.querySelector(".post-title").innerText.toLowerCase();
                if (title.includes(query)) {
                    post.style.display = "flex";
                } else {
                    post.style.display = "none";
                }
            });
        });
    }
});
</script>
{% endblock %}
