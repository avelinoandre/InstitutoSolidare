{% extends 'shared/base_logout.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/adm.css' %}?v=123">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<div class="container">
    <div class="sidebar">
        <a href="{% url 'admHome' %}" class="back-button">
            <span class="material-symbols-outlined">arrow_back</span>
        </a>
        <div class="sidebar-item active">Data</div>
        <div class="sidebar-item">Posts anteriores</div>
    </div>

    <main class="main-content">
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Nome, tema, tags ...">
        </div>

        <div class="post-list">
            {% for pub in publicacoes %}
                <div class="post-card" data-title="{{ pub.titulo|lower }}">
                    <div class="post-content">
                        <h2>{{ pub.titulo }}</h2>
                        {% if pub.foto %}
                            <img src="{{ pub.foto.url }}" alt="Foto da publicação" class="post-image">
                        {% endif %}
                        <p>{{ pub.conteudo }}</p>
                        <p class="post-date">{{ pub.data_envio }}</p>
                    </div>
                    <button class="manage-post-button">Gerenciar post</button>
                </div>
            {% empty %}
                <div class="post-card">
                    <div class="post-content">
                        <p>Nenhuma publicação pública encontrada.</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </main>
</div>

<button class="add-button">
    <span class="material-symbols-outlined">add</span>
</button>

<script>
document.getElementById("search-input").addEventListener("input", function () {
    const query = this.value.toLowerCase();
    const posts = document.querySelectorAll(".post-card");

    posts.forEach(post => {
        const title = post.getAttribute("data-title");
        if (title.includes(query)) {
            post.style.display = "block";
        } else {
            post.style.display = "none";
        }
    });
});
</script>
{% endblock %}
