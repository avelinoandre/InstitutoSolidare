{% extends 'shared/base_logout.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/adm.css' %}?v=123">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<div class="page-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <a href="{% url 'admHome' %}">
            <img src="{% static 'img/btn-voltar.svg' %}" alt="Voltar para o painel" class="back-icon">
        </a>
        <div class="sidebar-block-secondary"></div>
        <form method="post" enctype="multipart/form-data"> <!-- IMPORTANTE para upload de imagem -->
    {% csrf_token %}
            <button type="submit" class="action-button-bottom">Publicar</button>
    </div>

    <!-- Main content -->
    <div class="content-area main-content-new-post">
        <!-- Botão para liberar o select -->
<!-- Botão para mostrar o select -->
<button type="button" onclick="mostrarSelect()" class="action-button-bottom" style="margin-bottom: 10px;">
    Público
</button>

<!-- Select invisível inicialmente -->
<select name="host_afiliado" id="select-padrinho" class="input-full-width primary-input-field" style="display: none;">
    <option value="" disabled selected>Selecione o afiliado/padrinho</option>
    {% for apadrinhado in apadrinhados %}
        <option value="{{ apadrinhado.id }}">{{ apadrinhado.nome }}</option>
    {% endfor %}
</select>
<!-- Foto -->
<input type="file" name="foto" accept="image/*" class="input-full-width secondary-input-field" style="margin-top: 15px;" />
        <textarea name="titulo" class="textarea-full-width primary-textarea-field" placeholder="Título do post"></textarea>
        <input type="text" name="conteudo" class="input-full-width secondary-input-field" placeholder="Conteúdo">
    </div>
    </form>
</div>
<script>
    function mostrarSelect() {
        const select = document.getElementById("select-padrinho");
        const publicoFlag = document.getElementById("publico-flag");

        if (select.style.display === "block") {
            select.style.display = "none";
            publicoFlag.value = "False";
        } else {
            select.style.display = "block";
            publicoFlag.value = "True";
        }

        select.focus();
    }
</script>

{% endblock %}
