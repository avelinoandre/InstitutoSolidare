{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Questionario</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    {% include 'partials/new_header.html' %}

    <div class="question-wrapper">
        <div class="question-container">
            <div class="question-text">
                {{ pergunta_texto }}
            </div>

            <div class="answer-box">
                <label for="resposta" class="form-label">Selecione sua resposta:</label>
                <select id="resposta" name="resposta" class="form-select">
                    {% for i, opcao in opcoes_resposta %}
                        <option value="{{ i }}">{{ opcao }}</option>
                    {% endfor %}
                </select>
            </div>

            <button class="btn-continue" onclick="irParaProximaPergunta()">Continue</button>
        </div>
    </div>

    <div class="progress-indicator">
        {% for i in total_perguntas|make_list %}
            <div class="progress-dot {% if i == pergunta_atual %}active{% endif %}"></div>
        {% endfor %}
    </div>

    <footer class="footer-nav-button">
        <a href="{{ pergunta_anterior_url }}">
            <img src="{% static 'img/btn-voltar.svg' %}" alt="Voltar para a Pergunta Anterior" class="back-icon">
        </a>
    </footer>
    <script>
    function irParaProximaPergunta() {
        const select = document.getElementById('resposta');
        const respostaSelecionada = select.value;

        // Salvar no localStorage (ou sessionStorage) se quiser manter as respostas
        const perguntaAtual = {{ pergunta_atual }};
        localStorage.setItem('resposta_' + perguntaAtual, respostaSelecionada);

        const proximaPergunta = perguntaAtual + 1;
        const total = {{ total_perguntas }};

        if (proximaPergunta < total) {
            window.location.href = `/padrinho/questionario/${proximaPergunta}/`;
        } else {
            window.location.href = `/padrinho/criar-usuario/`;
        }
    }
</script>

</body>
</html>
